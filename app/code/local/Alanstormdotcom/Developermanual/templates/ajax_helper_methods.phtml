<?php
	$class = $this->getClass();
?>
<table border=0 cellpadding=4 cellspacing=4>
	<tr>
		<th colspan=2 style="font-size: 1.6em;">
			Class
		</th>
	</tr>
	<tr>
		<td style="font-weight: bold;">
			Class Name:
		</td>
		<td>
			<?php echo $class['fileParts']['className']; ?>
		</td>
	</tr>
	<tr>
		<td style="font-weight: bold;">
			Parent(s):
		</td>
		<td>
			<?php
				if($class['parents']) {
					echo implode(', ', $class['parents']);
				}
			?>
		</td>
	</tr>
	<tr>
		<td style="font-weight: bold;">
			Implemented In:
		</td>
		<td>
			<?php echo $class['filePath']; ?>
		</td>
	</tr>
	<tr>
		<td style="font-weight: bold;">
			Factory Method:
		</td>
		<td>
			<?php
				$method = "Mage::helper('" . $class['groupName'];
				if($class['alias'] != 'data') {
					$method .= '/' . $class['alias'];
				}
				echo $method . "')";
			?>
		</td>
	</tr>
	<?php if(is_array($class['rewrite']) && sizeof($class['rewrite']) > 0) : ?>
	<tr>
		<?php if(array_key_exists('by', $class['rewrite'])) : ?>
		<td style="font-weight: bold;">
			Rewrite By:
		</td>
		<td>
			<?php echo $class['rewrite']['by']; ?>
		</td>
		<?php elseif(array_key_exists('for', $class['rewrite'])) : ?>
		<td style="font-weight: bold;">
			Rewrite For:
		</td>
		<td>
			<?php echo $class['rewrite']['for']; ?>
		</td>
		<?php endif; ?>
	</tr>
	<?php endif; ?>
</table>

<hr style="margin-top: 12px; margin-bottom: 6px;"/>

<!--
$line['name']
$line['modifiers']
$line['parameters']
$line['docComment']
-->

<table border=0 cellpadding=4 cellspacing=4>
	<tr>
		<th style="font-size: 1.6em;" colspan="2">
			<a href="" onclick="$('methods_body').toggle();return false;">Methods</a>
		</th>
	</tr>
	<tbody id="methods_body" style="display: '';">
		<tr>
			<td colspan="2">
				<table border=0 cellpadding=4 cellspacing=4>
					<?php foreach($class['methods']['own_methods'] as $classMethod) : ?>
						<tr>
							<td style="width: 4px;">
								&nbsp;
							</td>
							<td colspan="2">
								<a href="" onclick="return moreIsLess('more_own_<?php echo $classMethod['name']; ?>', this)">more...</a>
							</td>
							<td>
								<?php echo implode(' ', $classMethod['modifiers']); ?>
								<?php echo $classMethod['name'] . $this->parseParameters($classMethod['parameters']); ?>
							</td>
						</tr>
						<tbody id="more_own_<?php echo $classMethod['name']; ?>" style="display: none;">
							<tr>
								<td style="width: 4px;">
								</td>
								<td>
								</td>
								<td style="width: 4px;">
								</td>
								<td>
									Implemented in: <?php echo $class['filePath'] . ' on lines: ' .  $classMethod['lineStart'] .
														' - ' . $classMethod['lineEnd']; ?>
								</td>
							</tr>
							<tr>
								<td style="width: 4px;">
								</td>
								<td>
								</td>
								<td style="width: 4px;">
								</td>
								<td>
									<pre><?php echo $classMethod['docComment']; ?></pre>
								</td>
							</tr>
						</tbody>
					<?php endforeach; ?>
				</table>
			</td>
		</tr>
		<?php foreach($class['methods']['inherited'] as $name => $parentClass) : ?>
			<tr>
				<td style="width: 4px;">
					&nbsp;
				</td>
				<td>
					<table border=0 cellpadding=4 cellspacing=4>
						<tr>
							<th colspan="3" style="font-size: 1.2em;">
								Inherited from: <a href="" onclick="$('inherited_<?php echo $name; ?>').toggle();return false;">
									<?php echo $name; ?>
								</a>
							</th>
						</tr>
						<tbody id="inherited_<?php echo $name; ?>" style="display: none;">
							<tr>
								<td style="width: 4px;">
									&nbsp;
								</td>
								<td>
									<table border=0 cellpadding=4 cellspacing=4>
										<?php foreach($parentClass as $method) : ?>
											<tr>
												<td>
													<a href="" onclick="return moreIsLess('more_inherited_<?php echo $method['name']; ?>', this)">more...</a>
												</td>
												<td>
													<?php echo implode(' ', $method['modifiers']); ?>
													<?php echo $method['name'] . $this->parseParameters($method['parameters']); ?>
												</td>
											</tr>
											<tbody id ="more_inherited_<?php echo $method['name']; ?>" style="display: none;">
												<tr>
													<td>
													</td>
													<td>
														Implemented in: <?php echo $class['filePath'] . ' on lines: ' .  $method['lineStart'] .
														' - ' . $method['lineEnd']; ?>
													</td>
												</tr>
												<tr>
													<td>
													</td>
													<td>
														<pre><?php echo $method['docComment']; ?></pre>
													</td>
												</tr>
											</tbody>
										<?php endforeach; ?>
									</table>
								</td>
							</tr>
						</tbody>
					</table>
				</td>
			</tr>
		<?php endforeach; ?>
	</tbody>
</table>

<!--
$line['name']
$line['modifiers']
$line['docComment']
-->

<table border=0 cellpadding=4 cellspacing=4>
	<tr>
		<th style="font-size: 1.6em;">
			<a href="" onclick="$('properties_body').toggle();return false;">Properties</a>
		</th>
	</tr>
	<tbody id="properties_body" style="display: none;">
	<?php foreach($class['properties'] as $declaringClass => $classProperties) : ?>
		<?php if($declaringClass != $class['fileParts']['className']) : ?>
		<tr>
			<th>
				Inherited from: <?php echo $declaringClass; ?>
			</th>
		</tr>
		<?php endif; ?>
		<?php foreach($classProperties as $prop) : ?>
		<tr>
			<td>
				<?php echo implode(' ', $prop['modifiers']); ?>
				<?php echo $prop['name']; ?>
			</td>
		</tr>
		<?php endforeach; ?>
	<?php endforeach; ?>
	</tbody>
</table>

<hr style="margin-top: 12px; margin-bottom: 6px;"/>

<script type="text/javascript">
/**
 *$('more_own_<?php //echo $classMethod['name']; ?>').toggle(); this.innerHTML = 'less...'; return false;
 
	document.observe("dom:loaded", function() {
		moreIsLess = function(){alert 'More is Less'; return false;};
	});
 */
</script>